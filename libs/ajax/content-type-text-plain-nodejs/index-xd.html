<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Bootstrap25</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <link rel="stylesheet" type="text/css" href="css/reset.css">
    <script src="js/jquery-1.8.3.min.js"></script>
    <!-- <script src="js/jquery-1.10.2.min.js"></script> -->
    <script src="js/json2.js"></script>
    <script src="js/jquery-migrate.js"></script>
    <!-- <script src="js/jquery.form.js"></script> -->
    <!-- <script src="js/xdr.js"></script> -->
    <!--[if lt IE 9]>
    <![endif]-->  
        <script>
        console.log("is ie9")
        </script>
        <script src="js/jQuery.XDomainRequest.js"></script>
</head>

<body>
    <div class="container">
        client
        <div id="msg"></div>
    </div>
    <!--  -->
    <form id="tform" action="" method="post" accept-charset="utf-8">
        <input type="text" name="username" />
        <input type="text" name="id" />
        <input type="submit" id="sub" value="go" />
    </form>
    <div id="myResultsDiv"></div>
    <!-- <iframe id="piframe" name="piframe" src="" frameborder="0"></iframe> -->
    <script type="text/javascript">
    $(function() {
        
        var option = {
            url: "http://localhost:3000/user",
            type: "post",
            // iframe: true,
            // target: "#piframe",
            crossDomain: true,
            cache: false,
            dataType: 'json',
            // contentType: 'text/plain',
            // contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            contentType: "application/json",
            // contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            success: function(data) {
                console.log("ajform: ", data);
                $("#myResultsDiv").text(JSON.stringify(data));
            },
            error: function(err) {
                console.log("err: ", JSON.stringify(err));
                $("#myResultsDiv").html(JSON.stringify(err));
            }
        };
        // $("#tform").ajaxForm(option);
        $("#sub").click(function(e) {
            var fdata = {
                username: $("#tform").find('input[name="username"]').val(),
                id: $("#tform").find('input[name="id"]').val()
            };
            option.data = JSON.stringify( fdata );
            
            e.preventDefault();
            $.ajax(option)

        });
        // form.submit();


        // $.ajax({
        //     url: 'http://api.ycdl.com',
        //     data: {"username": "allen"},
        //     target: "#piframe",
        //     // cache: false,
        //     crossDomain: true,
        //     contentType: "application/x-www-form-urlencoded; charset=UTF-8",
        //     // contentType: 'text/plain; charset=UTF-8',
        //     // contentType: "application/json",
        //     type: 'POST',
        //     dataType: 'json'
        // }).done(function(data) {
        //     // console.log(data)
        //     $("#myResultsDiv").text(JSON.stringify(data));
        // });


        // $.ajax({
        //     url: 'http://api.ycdl.com',
        //     type: 'get',
        //     data: {
        //         "name": "allen"
        //     },
        //     dataType: 'json',
        //     crossDomain: true,
        //     // xhrFields: {
        //     //     withCredentials: true
        //     // },
        //     // headers: {
        //     //     'Access-Control-Allow-Origin': '*'
        //     // },
        //     jsonp: 'callback'
        // }).then(function(data) {
        //     console.log("s: ", data);
        //     $("#msg").text(JSON.stringify(data));
        // }, function(err) {
        //     console.log("err: ", err);
        //     $("#msg").text(JSON.stringify(err));
        // });
    })
    </script>
</body>

</html>
